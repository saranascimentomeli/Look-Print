"use strict";(self.webpackChunkportalMeli=self.webpackChunkportalMeli||[]).push([[243],{243:(_e,M,l)=>{l.r(M),l.d(M,{EagleOutboundModule:()=>le});var p=l(9808),k=l(1083),_=l(387),I=l(5226),u=l.n(I),i=l(3075);class C{constructor(){this.tote=[],this.token=_.m.GetInstance().GetToken().token}}var t=l(5e3),d=l(2340),q=l(520);let A=(()=>{class o{constructor(e){this.http=e}ArmazenarTote(e){return this.http.post(d.N.url_base+"Eagle/Armazenar/Create.php",e)}SalvarLog(e){return this.http.post(d.N.url_base+"Eagle/Log/Create.php",e)}ArmazenarToteOutbound(e){return this.http.post(d.N.url_base+"EagleOutbound/Armazenar/Create.php",e)}ArmazenarToteOutboundBancada(e){return this.http.post(d.N.url_base+"EagleOutbound/Armazenar/CreateBancada.php",e)}ConsultarTotesPendentesOutbound(e){return this.http.post(d.N.url_base+"EagleOutbound/TotesPendentesOutbound/index.php",e)}RetirarTote(e){return this.http.post(d.N.url_base+"Eagle/Retirar/Create.php",e)}TransferTote(e){return this.http.post(d.N.url_base+"Eagle/Transfer/Create.php",e)}TransferToteOutbound(e){return this.http.post(d.N.url_base+"EagleOutbound/Transfer/Create.php",e)}PesquisarPallet(e){return this.http.post(d.N.url_base+"Eagle/Transfer/PesquisarPallet.php",e)}PesquisarPalletOutbound(e){return this.http.post(d.N.url_base+"EagleOutbound/Transfer/PesquisarPallet.php",e)}PesquisarPorEndereco(e){return this.http.post(d.N.url_base+"EagleOutbound/Transfer/PesquisarPorEndereco.php",e)}RemoverTOTES(e){return this.http.post(d.N.url_base+"EagleOutbound/Transfer/RemoveTotes.php",e)}SaveStatistic(e){return this.http.post(d.N.url_base+"Statistic/Create.php",e)}GetAppVersion(e){return this.http.post(d.N.endpoint+"Version/index.php",e)}ConsultarPickupId(e){return this.http.post(d.N.endpoint+"EagleOutbound/Armazenar/PickupId.php",e)}GetAreas(e){return this.http.post(d.N.endpoint+"Compass/area.php",e)}RegistroCompass(e){return this.http.post(d.N.endpoint+"Compass/Create.php",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var c=l(9224),g=l(7322),T=l(7531);function B(o,a){1&o&&(t.TgZ(0,"div",6),t._uU(1," Tote Invalido. "),t.qZA())}function Y(o,a){1&o&&(t.TgZ(0,"div",7),t._UZ(1,"span",8),t.qZA())}class w{}let H=(()=>{class o{constructor(e,n,r){this._formBuilder=e,this.stageModel=n,this.armazenarService=r,this.consultETD=[],this.totePattern="([a-zA-Z]{2,2}-?d{1}-?d{3}-?d{3}-?d{2}-?d{2})"}onKeydownHandler(e){e.preventDefault()}ConsultarTodosTotesPendentes(){this.armazenarService.ConsultarTotesPendentesOutbound(JSON.stringify(this.stageModel)).subscribe(e=>{this.consultETD=e})}ngOnInit(){this.CreateForm(this.stageModel),this.onChanges(),this.ConsultarTodosTotesPendentes()}CreateForm(e){this.formCliente=this._formBuilder.group({posicao:[e.stage,i.kI.required],tote:[]})}get tote(){return this.formCliente.get("tote")}onChanges(){this.formCliente.get("tote").valueChanges.subscribe(e=>{var n;if("C"==e[0].toUpperCase()&&18==e.length||"M"==e[0].toUpperCase()&&16==e.length){if(null===(n=this.formCliente.get("tote").errors)||void 0===n?void 0:n.pattern)return;let r=this.ReturnETD(e);this.ShowETD(r),this.formCliente.get("tote").setValue("",{emitEvent:!1}),this.ResetForm()}})}ShowETD(e){null!=e?u().fire({html:"<p class='w-100 etd'>Processo : "+e.status+"</p><p class='w-100 etd'>ETD : "+e.date+"</p> <p class='hour'>"+e.hour+"</p>",icon:"info",allowEnterKey:!1,timer:800,background:"#FFF159"}):u().fire({text:"ETD do TOTE n\xe3o encontrado!",icon:"warning",allowEnterKey:!1,timer:800})}ResetForm(){this.stageModel=new C,this.CreateForm(this.stageModel),this.ConsultarTodosTotesPendentes(),this.onChanges()}ReturnETD(e){return this.consultETD.find(r=>r.tote==e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(C),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-consulta-etd"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown.enter",function(s){return n.onKeydownHandler(s)},!1,t.evT)},features:[t._Bn([C,w])],decls:13,vars:3,consts:[[3,"formGroup"],["matInput","","NgModel","","pattern","[a-zA-Z]{2,2}\\-?\\[a-zA-Z]{3,2}\\-?\\d{2}\\-?\\d{3}","placeholder","Escaneie uma CA","formControlName","tote"],["style","color: red;",4,"ngIf"],[1,"row"],[1,"col","text-center"],["class","spinner-border","role","status",4,"ngIf"],[2,"color","red"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t._uU(3,"Escaneie o TOTE"),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"mat-form-field"),t.TgZ(6,"mat-label"),t._uU(7,"TOTE"),t.qZA(),t._UZ(8,"input",1),t.YNc(9,B,2,0,"div",2),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"div",3),t.TgZ(11,"div",4),t.YNc(12,Y,2,0,"div",5),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.formCliente),t.xp6(9),t.Q6J("ngIf",null==n.tote.errors?null:n.tote.errors.pattern),t.xp6(3),t.Q6J("ngIf",!1))},directives:[i._Y,i.JL,i.sg,c.a8,c.n5,c.dn,g.KE,g.hX,T.Nt,i.Fj,i.c5,i.JJ,i.u,p.O5],styles:["mat-card[_ngcontent-%COMP%]{margin:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})();var Z=l(7423),b=l(4623),x=l(3874);function Q(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie a posi\xe7\xe3o"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"mat-form-field"),t.TgZ(5,"mat-label"),t._uU(6,"Posi\xe7\xe3o"),t.qZA(),t._UZ(7,"input",11,12),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-actions",2),t.TgZ(10,"button",3),t.NdJ("click",function(){return t.CHM(e),t.oxw().Anterior()}),t._uU(11,"Anterior"),t.qZA(),t.qZA(),t.qZA()}}function G(o,a){1&o&&(t.TgZ(0,"div",16),t._uU(1," Tote Invalido. "),t.qZA())}function j(o,a){if(1&o&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie o TOTE"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t.TgZ(4,"div",13),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-form-field"),t.TgZ(8,"mat-label"),t._uU(9,"TOTE"),t.qZA(),t._UZ(10,"input",14),t.YNc(11,G,2,0,"div",15),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(5),t.hij(" ",e.stageModel.length," "),t.xp6(6),t.Q6J("ngIf",null==e.tote.errors?null:e.tote.errors.pattern)}}function $(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item"),t.TgZ(1,"div",9),t._uU(2),t.qZA(),t.TgZ(3,"div",9),t.TgZ(4,"button",17),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().RemoveTote(s.tote)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(2),t.AsE(" TOTE : ",e.tote," | Bancada : ",e.stage," ")}}function K(o,a){1&o&&(t.TgZ(0,"div",18),t._UZ(1,"span",19),t.qZA())}class U{constructor(){this.tote="",this.stage=""}}let X=(()=>{class o{constructor(e,n){this._formBuilder=e,this.armazenarService=n,this.mostrar=!0,this.consultETD=[],this.foco=!0,this.desabilitarFinalizar=!1,this.totePattern="([a-zA-Z]{2,2}-?d{1}-?d{3}-?d{3}-?d{2}-?d{2})",this.stageModel=[],this.atrelamento=new U}onKeydownHandler(e){e.preventDefault()}ConsultarTodosTotesPendentes(){let e={token:_.m.GetInstance().GetToken().token};this.armazenarService.ConsultarTotesPendentesOutbound(JSON.stringify(e)).subscribe(n=>{this.consultETD=n})}ngOnInit(){this.CreateForm(),this.onChanges(),this.ConsultarTodosTotesPendentes()}CreateForm(){this.formCliente=this._formBuilder.group({posicao:[],tote:[]})}get tote(){return this.formCliente.get("tote")}onChanges(){this.formCliente.get("tote").valueChanges.subscribe(e=>{var n;if(18==e.length){if(null===(n=this.formCliente.get("tote").errors)||void 0===n?void 0:n.pattern)return;if(-1===this.Exists(e))return this.atrelamento.tote=e,this.formCliente.get("tote").setValue("",{emitEvent:!1}),void(this.mostrar=!1);this.formCliente.get("tote").setValue("",{emitEvent:!1})}}),this.formCliente.get("posicao").valueChanges.subscribe(e=>{8==e.length&&(this.atrelamento.stage=e,this.stageModel.push(this.atrelamento),this.atrelamento=new U,this.formCliente.get("posicao").setValue("",{emitEvent:!1}),this.mostrar=!0)})}ShowETD(e){if(this.formCliente.get("aviso_etd").value){if(null==e)return void u().fire({text:"ETD do TOTE n\xe3o encontrado!",icon:"warning",allowEnterKey:!1,timer:3e3});u().fire({html:"<p class='w-100 etd'>Processo : "+e.status+"</p><p class='w-100 etd'>ETD : "+e.date+"</p> <p class='hour'>"+e.hour+"</p>",icon:"info",allowEnterKey:!1,timer:3e3,background:"#FFF159"})}}Proximo(){this.mostrar=!1}Anterior(){this.mostrar=!0}ResetForm(){this.stageModel=[],this.CreateForm(),this.mostrar=!0,this.ConsultarTodosTotesPendentes(),this.onChanges()}Finalizar(){this.formCliente.valid&&(this.desabilitarFinalizar=!0,_.m.GetInstance().GetToken(),this.armazenarService.ArmazenarToteOutboundBancada(JSON.stringify(this.stageModel)).subscribe(n=>{u().fire({icon:"success",text:"Salvo!"}),this.ResetForm()},n=>{u().fire({icon:"error",text:"Ocorreu um erro!"})}),this.desabilitarFinalizar=!1)}RemoveTote(e){let n=this.Exists(e);-1!==n&&this.stageModel.splice(n,1)}Exists(e){let n=this.stageModel.find(r=>r.tote==e);return void 0===n?-1:this.stageModel.indexOf(n)}ReturnETD(e){return this.consultETD.find(r=>r.tote==e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-armazenar-bancada"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown.enter",function(s){return n.onKeydownHandler(s)},!1,t.evT)},features:[t._Bn([U,w])],decls:16,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["align","end"],["mat-raised-button","","color","primary",3,"click"],[1,"row","w-100"],[1,"w-100"],["modeTote",""],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","text-center"],["class","spinner-border","role","status",4,"ngIf"],["matInput","","placeholder","Escaneie uma posi\xe7\xe3o","formControlName","posicao"],["stageForm",""],[1,"coin"],["autofocus","","matInput","","pattern","[a-zA-Z]{2,2}\\-?\\d{1}\\-?\\d{3}\\-?\\d{3}\\-?\\d{2}\\-?\\d{2}","placeholder","Escaneie uma CA","formControlName","tote"],["style","color: red;",4,"ngIf"],[2,"color","red"],["mat-icon-button","",1,"btn","btn-danger",3,"click"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.YNc(1,Q,12,0,"mat-card",1),t.YNc(2,j,12,2,"mat-card",1),t.TgZ(3,"mat-card"),t.TgZ(4,"mat-card-actions",2),t.TgZ(5,"button",3),t.NdJ("click",function(){return n.Finalizar()}),t._uU(6,"Finalizar"),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-title"),t._uU(8,"CAs Adicionadas"),t.qZA(),t.TgZ(9,"div",4),t.TgZ(10,"mat-selection-list",5,6),t.YNc(12,$,7,2,"mat-list-item",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",8),t.TgZ(14,"div",9),t.YNc(15,K,2,0,"div",10),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.formCliente),t.xp6(1),t.Q6J("ngIf",!n.mostrar),t.xp6(1),t.Q6J("ngIf",n.mostrar),t.xp6(10),t.Q6J("ngForOf",n.stageModel),t.xp6(3),t.Q6J("ngIf",n.desabilitarFinalizar))},directives:[i._Y,i.JL,i.sg,p.O5,c.a8,c.n5,c.dn,g.KE,g.hX,T.Nt,i.Fj,i.JJ,i.u,c.hq,Z.lW,c.$j,i.c5,b.Ub,p.sg,b.Tg,x.Hw],styles:["mat-card[_ngcontent-%COMP%]{margin:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})(),V=(()=>{class o{constructor(e){this.http=e}postFile(e,n){const r=d.N.url_base+"Imports/Movimentos/CreateWithFile.php",s=new FormData;return s.append("file",e,n),this.http.post(r,s)}PostImg(e){return this.http.post(d.N.url_base+"Eagle/UpdateMap/Create.php",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function L(o,a){1&o&&(t.TgZ(0,"div",13),t._UZ(1,"span",14),t.qZA())}let W=(()=>{class o{constructor(e){this.uploadService=e,this.fileToUpload=null,this.loading=!1,this.responseServer="",this.image=""}ngOnInit(){}handleFileInput(e){if("png"==e.target.files[0].name.split(".")[1]){this.fileToUpload=e.target.files[0];const n=new FileReader;return n.readAsDataURL(this.fileToUpload),void(n.onload=()=>{var r;this.image=null===(r=n.result)||void 0===r?void 0:r.toString()})}this.fileToUpload=null}EnviarArquivo(){let e={token:_.m.GetInstance().GetToken().token,image:this.image,setor:2};this.loading=!0,this.uploadService.PostImg(e).subscribe({next:this.Success.bind(this),error:this.Error.bind(this)})}Success(e){this.responseServer=e,this.loading=!1,u().fire({icon:"success",text:"Arquivo enviado",timer:2e3})}Error(e){this.responseServer="Erro ao enviar o arquivo.",this.loading=!1,u().fire({icon:"error",text:"Erro ao enviar o arquivo",timer:2e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(V))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-img-heatmap"]],decls:23,vars:3,consts:[[1,"container-fluid"],[1,"row","mb-3"],[1,"col"],[1,"form-group"],["for","file"],["type","file",1,"file-upload",3,"change"],["input",""],[1,"row"],["align","end"],["type","button",1,"float-right","btn","btn-primary",3,"disabled","click"],[1,"row","mt-5"],[1,"col","text-center"],["class","spinner-border","role","status",4,"ngIf"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-title"),t._uU(3,"Atualizar planta - Outbound"),t.qZA(),t.TgZ(4,"mat-card-content"),t.TgZ(5,"div",1),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"label",4),t._uU(9,"Escolha o arquivo jpeg"),t.qZA(),t._UZ(10,"br"),t.TgZ(11,"input",5,6),t.NdJ("change",function(s){return n.handleFileInput(s)}),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",7),t.TgZ(14,"div",2),t.TgZ(15,"p"),t._uU(16),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-actions",8),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.EnviarArquivo()}),t._uU(19,"Enviar"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"div",10),t.TgZ(21,"div",11),t.YNc(22,L,2,0,"div",12),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(16),t.hij("Resposta do servidor : ",n.responseServer,""),t.xp6(2),t.Q6J("disabled",null==n.fileToUpload),t.xp6(4),t.Q6J("ngIf",n.loading))},directives:[c.a8,c.n5,c.dn,c.hq,p.O5],styles:[""]}),o})();var m=l(8279),F=l(8966);let P=(()=>{class o{constructor(e){this.http=e}Relatorio_por_ca(e){return this.http.post(d.N.url_base+"Eagle/Analise/analise_ca.php",e)}Relatorio_por_ca_outbound(e){return this.http.post(d.N.url_base+"EagleOutbound/Analise/analise_ca.php",e)}Relatorio_HeatMap_Out(e){return this.http.post(d.N.url_base+"EagleOutbound/Heatmap/index.php",e)}GetImagePlanta(e){return this.http.post(d.N.url_base+"Eagle/UpdateMap/index.php",e)}GetCompass(e){return this.http.post(d.N.url_base+"Compass/index.php",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(q.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var R=l(7238),E=l(2181);function tt(o,a){if(1&o&&(t.TgZ(0,"th",19),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.substring(0,2))}}const et=function(o){return{backgroundColor:o}},ot=function(o,a,e){return{empty:o,alocated:a,prioridade:e}};function nt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",20),t.TgZ(1,"div",21),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).openDialog()}),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit,n=t.oxw().$implicit;t.xp6(1),t.MGl("matTooltip","Quantidade de TOTES : ",e[n].dados.totes,""),t.Q6J("hidden","empty"==e[n].rua)("ngStyle",t.VKq(5,et,e[n].dados.color))("ngClass",t.kEZ(7,ot,"0"==e[n].dados.totes,"0"!=e[n].dados.totes,1==e[n].prioridade)),t.xp6(2),t.Oqu(e[n].rua.substring(0,6)+e[n].rua.substring(9,11))}}function at(o,a){1&o&&(t.ynx(0,16),t.YNc(1,tt,2,1,"th",17),t.YNc(2,nt,4,11,"td",18),t.BQk()),2&o&&t.s9C("matColumnDef",a.$implicit)}function rt(o,a){1&o&&t._UZ(0,"tr",22)}function it(o,a){1&o&&t._UZ(0,"tr",23)}let st=(()=>{class o{constructor(e,n){this.dialog=e,this.relatorioService=n,this.displayedColumns=["column 1","column 2"],this.dataSource=new m.by,this.serverInfo=0,this.filtros=[],this.lado="M0"}ngOnDestroy(){window.clearInterval(this.serverInfo)}openDialog(){}ngOnInit(){this.RequestRelatorio(),this.serverInfo=window.setInterval(()=>{this.RequestRelatorio()},5e3)}RequestRelatorio(){let e={token:_.m.GetInstance().GetToken().token};this.relatorioService.Relatorio_HeatMap_Out(JSON.stringify(e)).subscribe(n=>{this.filtros=[];for(let r=0;r<n.cabecalhos.length;r++){n.cabecalhos[r].substring(0,2)!=this.lado||this.filtros.push(n.cabecalhos[r]);for(const s in n.dados[r])`${s}`.substring(0,2)!=this.lado&&(console.log(n.dados[r][s].dados),delete n.dados[r][s])}n.cabecalhos=this.filtros,console.log(n.cabecalhos),console.log(n.dados),this.displayedColumns=n.cabecalhos.reverse(),this.dataSource=n.dados})}OpenGeral(e){this.lado=e,this.RequestRelatorio()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(F.uw),t.Y36(P))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-out-heatmap"]],decls:43,vars:5,consts:[[1,"row"],[1,"col"],["mat-table","",1,"mat-elevation-z0","teste",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"col","m-1","legend","vermelho",2,"background-color","#FA0000"],[1,"h-100","d-flex","align-items-center"],[1,"col","m-1","legend",2,"background-color","#FF7B7B"],[1,"col","m-1","legend",2,"background-color","#FCC500"],[1,"col","m-1","legend",2,"background-color","#52BF90"],[1,"col","m-1","legend",2,"background-color","#F1F1F1"],[1,"button-container"],["mat-mini-fab","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],[3,"hidden","matTooltip","ngStyle","ngClass","click"],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"table",2),t.YNc(3,at,3,1,"ng-container",3),t.YNc(4,rt,1,0,"tr",4),t.YNc(5,it,1,0,"tr",5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"div",0),t.TgZ(7,"div",6),t.TgZ(8,"p",7),t._uU(9,"Prioridade 0 : maior quantidade de totes com ETD da vez"),t.qZA(),t.qZA(),t.TgZ(10,"div",8),t.TgZ(11,"p",7),t._uU(12,"Prioridade 1 : totes com ETD da vez"),t.qZA(),t.qZA(),t.TgZ(13,"div",9),t.TgZ(14,"p",7),t._uU(15,"Prioridade 2 : totes com pr\xf3ximo ETD"),t.qZA(),t.qZA(),t.TgZ(16,"div",10),t.TgZ(17,"p",7),t._uU(18,"Prioridade 3 : demais ETD"),t.qZA(),t.qZA(),t.TgZ(19,"div",11),t.TgZ(20,"p",7),t._uU(21,"Vazio"),t.qZA(),t.qZA(),t.TgZ(22,"div",12),t.TgZ(23,"button",13),t.TgZ(24,"mat-icon"),t._uU(25,"filter_list"),t.qZA(),t.qZA(),t.TgZ(26,"mat-menu",null,14),t.TgZ(28,"button",15),t.NdJ("click",function(){return n.OpenGeral("M0")}),t.TgZ(29,"mat-icon"),t._uU(30,"settings"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"M0"),t.qZA(),t.qZA(),t.TgZ(33,"button",15),t.NdJ("click",function(){return n.OpenGeral("M1")}),t.TgZ(34,"mat-icon"),t._uU(35,"settings"),t.qZA(),t.TgZ(36,"span"),t._uU(37,"M1"),t.qZA(),t.qZA(),t.TgZ(38,"button",15),t.NdJ("click",function(){return n.OpenGeral("M2")}),t.TgZ(39,"mat-icon"),t._uU(40,"settings"),t.qZA(),t.TgZ(41,"span"),t._uU(42,"M2"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const r=t.MAs(27);t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(1),t.Q6J("ngForOf",n.displayedColumns),t.xp6(1),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(18),t.Q6J("matMenuTriggerFor",r)}},directives:[m.BZ,p.sg,m.w1,m.fO,m.ge,m.Dz,m.ev,R.gM,p.PC,p.mk,m.as,m.XQ,m.nj,m.Gk,Z.lW,E.p6,x.Hw,E.VK,E.OP],styles:[".legend[_ngcontent-%COMP%]{border-radius:5px;font-size:large}.vermelho[_ngcontent-%COMP%]{border-radius:5px;font-size:large;color:#fff}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-top-left-radius:1em;border-top-right-radius:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;font-size:medium;text-align:center;font-size:2vw}.empty[_ngcontent-%COMP%]{background-color:#f1f1f1;width:80%;height:4vw;margin:10px;line-height:4vw;text-align:center;border-radius:5px;box-shadow:0 0 10px -5px #000}.alocated[_ngcontent-%COMP%]{width:80%;height:4vw;margin:10px;line-height:4vw;text-align:center;border-radius:5px;box-shadow:0 0 10px -5px #000}.prioridade[_ngcontent-%COMP%]{background-color:#fa0000!important;width:80%;height:4vw;margin:10px;line-height:4vw;text-align:center;border-radius:5px;box-shadow:0 0 10px -5px #000;animation:blink-animation 3s steps(5,start) infinite;-webkit-animation:blink-animation 1s steps(5,start) infinite}@keyframes blink-animation{to{visibility:hidden}}span[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;line-height:normal;font-size:1vw;font-weight:700}td.mat-cell[_ngcontent-%COMP%]{border-bottom-style:none}[hidden][_ngcontent-%COMP%]{display:none!important}"]}),o})();var N=l(6087),O=l(4847),z=l(4107),S=l(508),J=l(7877);function lt(o,a){if(1&o&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ct(o,a){if(1&o&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function dt(o,a){if(1&o&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function mt(o,a){if(1&o&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function ut(o,a){if(1&o&&(t.TgZ(0,"mat-option",37),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function pt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"TOTE"),t.qZA())}function gt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.tote," ")}}function ft(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Processo"),t.qZA())}function ht(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.process," ")}}function _t(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"ETD"),t.qZA())}function Tt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.AsE(" ",e.etd_date," ",e.etd_hour," ")}}function Zt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Tempo restante"),t.qZA())}const Ct=function(o,a,e){return{"badge-24":o,"badge-24-48":a,"badge-48":e}};function vt(o,a){if(1&o&&(t.TgZ(0,"td",39),t.TgZ(1,"div",40),t._uU(2),t.qZA(),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("ngClass",t.kEZ(2,Ct,"success"==e.style,"warning"==e.style,"danger"==e.style)),t.xp6(1),t.hij(" ",e.etd_remaining_time," ")}}function At(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"AGING"),t.qZA())}function bt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.aging,"")}}function qt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"\xdaltimo endere\xe7o"),t.qZA())}function xt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.last_address," ")}}function Et(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Respons\xe1vel"),t.qZA())}function Ot(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.responsible," ")}}function wt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Tipo Pedido"),t.qZA())}function Ut(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.order_type," ")}}function Nt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Data atrelamento"),t.qZA())}function yt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.date_staged," ")}}function Mt(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Stage"),t.qZA())}function kt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.stage," ")}}function Ft(o,a){1&o&&(t.TgZ(0,"th",38),t._uU(1,"Respons\xe1vel Stage"),t.qZA())}function Pt(o,a){if(1&o&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.armazenado_por," ")}}function Rt(o,a){1&o&&t._UZ(0,"tr",41)}function zt(o,a){1&o&&t._UZ(0,"tr",42)}const St=function(){return[5,10,50,100]};let Jt=(()=>{class o{constructor(e,n){this.relatorioService=n,this.displayedColumns=["TOTE","Process","etd","etd_remaining_time","aging","last_address","responsible","order_type","date_staged","stage","name"],this.dataSource=new m.by,this.semaforo=["Todos","Verde","Amarelo","Vermelho"],this.tipo=["Todos","Endere\xe7ados","Sem endere\xe7o"],this.armazenado_by=[],this.processo=[],this.etds=[],this.qtd_verde=0,this.qtd_amarelo=0,this.qtd_vermelho=0,this.vol_verde=0,this.vol_amarelo=0,this.vol_vermelho=0,this.ultimaAtualizacao="",this.formDash=e.group({dataInicio:[],dataFim:[],semafaroSelecionado:[],statusSelecionado:[],armazenado_por:[],processoSelecionado:[],etdSelecionado:[],tote:[]})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnInit(){this.RequestRelatorio()}RequestRelatorio(){var e,n,r,s,f,y;if(this.formDash.valid){this.dataSource.data=[];let fe={semafaro:null===(e=this.formDash.get("semafaroSelecionado"))||void 0===e?void 0:e.value,status:null===(n=this.formDash.get("statusSelecionado"))||void 0===n?void 0:n.value,armazenado_por:null===(r=this.formDash.get("armazenado_por"))||void 0===r?void 0:r.value,processo:null===(s=this.formDash.get("processoSelecionado"))||void 0===s?void 0:s.value,etd:null===(f=this.formDash.get("etdSelecionado"))||void 0===f?void 0:f.value,tote:null===(y=this.formDash.get("tote"))||void 0===y?void 0:y.value,token:_.m.GetInstance().GetToken().token},he=JSON.stringify(fe);this.relatorioService.Relatorio_por_ca_outbound(he).subscribe(h=>{this.dataSource.data=h.data,this.qtd_verde=h.resumo.verde.quantidade_ca,this.qtd_amarelo=h.resumo.amarelo.quantidade_ca,this.qtd_vermelho=h.resumo.vermelho.quantidade_ca,this.vol_verde=h.resumo.verde.volume,this.vol_amarelo=h.resumo.amarelo.volume,this.vol_vermelho=h.resumo.vermelho.volume,this.ultimaAtualizacao=h.lastUpdate,this.armazenado_by=h.armazenado_por,this.processo=h.process,this.etds=h.etd_completo})}}onClick(){this.RequestRelatorio()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(P))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-relatorio-tote"]],viewQuery:function(e,n){if(1&e&&(t.Gf(N.NW,5),t.Gf(O.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.paginator=r.first),t.iGM(r=t.CRH())&&(n.sort=r.first)}},decls:112,vars:18,consts:[[1,"container-fluid"],[1,"row"],[1,"col"],[2,"text-align","right"],[3,"formGroup"],["appearance","fill"],["formControlName","etdSelecionado"],[3,"value",4,"ngFor","ngForOf"],["formControlName","processoSelecionado"],["formControlName","semafaroSelecionado"],["formControlName","statusSelecionado"],["formControlName","armazenado_por"],["matInput","","placeholder","Pesquisa por tote","formControlName","tote"],["type","button","mat-raised-button","","color","primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"col-sm-12","col-md-4","col-lg-4","mb-2"],[1,"card-24"],[1,"card-24-48"],[1,"card-48"],["mat-table","","matSort","","matTableExporter","",1,"mat-elevation-z8","teste",3,"dataSource"],["exporter","matTableExporter"],["matColumnDef","TOTE"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Process"],["matColumnDef","etd"],["matColumnDef","etd_remaining_time"],["matColumnDef","aging"],["matColumnDef","last_address"],["matColumnDef","responsible"],["matColumnDef","order_type"],["matColumnDef","date_staged"],["matColumnDef","stage"],["matColumnDef","name"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"value"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"p",3),t._uU(4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"div",1),t.TgZ(6,"div",2),t.TgZ(7,"form",4),t.TgZ(8,"div",1),t.TgZ(9,"div",2),t.TgZ(10,"mat-form-field",5),t.TgZ(11,"mat-label"),t._uU(12,"ETD"),t.qZA(),t.TgZ(13,"mat-select",6),t.YNc(14,lt,2,2,"mat-option",7),t.qZA(),t.qZA(),t._uU(15," \xa0 "),t.TgZ(16,"mat-form-field",5),t.TgZ(17,"mat-label"),t._uU(18,"Processo"),t.qZA(),t.TgZ(19,"mat-select",8),t.YNc(20,ct,2,2,"mat-option",7),t.qZA(),t.qZA(),t._uU(21," \xa0 "),t.TgZ(22,"mat-form-field",5),t.TgZ(23,"mat-label"),t._uU(24,"Sem\xe1foro"),t.qZA(),t.TgZ(25,"mat-select",9),t.YNc(26,dt,2,2,"mat-option",7),t.qZA(),t.qZA(),t._uU(27," \xa0 "),t.TgZ(28,"mat-form-field",5),t.TgZ(29,"mat-label"),t._uU(30,"Status"),t.qZA(),t.TgZ(31,"mat-select",10),t.YNc(32,mt,2,2,"mat-option",7),t.qZA(),t.qZA(),t._uU(33," \xa0 "),t.TgZ(34,"mat-form-field",5),t.TgZ(35,"mat-label"),t._uU(36,"Armazenado por"),t.qZA(),t.TgZ(37,"mat-select",11),t.YNc(38,ut,2,2,"mat-option",7),t.qZA(),t.qZA(),t._uU(39," \xa0 "),t.TgZ(40,"mat-form-field",5),t.TgZ(41,"mat-label"),t._uU(42,"TOTE"),t.qZA(),t._UZ(43,"input",12),t.qZA(),t.qZA(),t.qZA(),t.TgZ(44,"div",1),t.TgZ(45,"div",2),t.TgZ(46,"button",13),t.NdJ("click",function(){return n.onClick()}),t._uU(47,"Consultar"),t.qZA(),t._uU(48," \xa0 "),t.TgZ(49,"button",14),t.NdJ("click",function(){return t.CHM(r),t.MAs(75).exportTable("csv",{fileName:"pi_relatorio_ca"})}),t._uU(50,"Exportar p/ CSV"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(51," \xa0 "),t.qZA(),t.qZA(),t.TgZ(52,"div",1),t.TgZ(53,"div",15),t.TgZ(54,"mat-card",16),t.TgZ(55,"mat-card-content"),t._uU(56,"Maior que 4hrs"),t.qZA(),t.TgZ(57,"mat-card-content"),t._uU(58),t.qZA(),t.qZA(),t.qZA(),t.TgZ(59,"div",15),t.TgZ(60,"mat-card",17),t.TgZ(61,"mat-card-content"),t._uU(62,"Entre 2 e 4hrs"),t.qZA(),t.TgZ(63,"mat-card-content"),t._uU(64),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",15),t.TgZ(66,"mat-card",18),t.TgZ(67,"mat-card-content"),t._uU(68,"Menor que 2hrs"),t.qZA(),t.TgZ(69,"mat-card-content"),t._uU(70),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._uU(71," \xa0 "),t.TgZ(72,"div",1),t.TgZ(73,"div",2),t.TgZ(74,"table",19,20),t.ynx(76,21),t.YNc(77,pt,2,0,"th",22),t.YNc(78,gt,2,1,"td",23),t.BQk(),t.ynx(79,24),t.YNc(80,ft,2,0,"th",22),t.YNc(81,ht,2,1,"td",23),t.BQk(),t.ynx(82,25),t.YNc(83,_t,2,0,"th",22),t.YNc(84,Tt,2,2,"td",23),t.BQk(),t.ynx(85,26),t.YNc(86,Zt,2,0,"th",22),t.YNc(87,vt,3,6,"td",23),t.BQk(),t.ynx(88,27),t.YNc(89,At,2,0,"th",22),t.YNc(90,bt,2,1,"td",23),t.BQk(),t.ynx(91,28),t.YNc(92,qt,2,0,"th",22),t.YNc(93,xt,2,1,"td",23),t.BQk(),t.ynx(94,29),t.YNc(95,Et,2,0,"th",22),t.YNc(96,Ot,2,1,"td",23),t.BQk(),t.ynx(97,30),t.YNc(98,wt,2,0,"th",22),t.YNc(99,Ut,2,1,"td",23),t.BQk(),t.ynx(100,31),t.YNc(101,Nt,2,0,"th",22),t.YNc(102,yt,2,1,"td",23),t.BQk(),t.ynx(103,32),t.YNc(104,Mt,2,0,"th",22),t.YNc(105,kt,2,1,"td",23),t.BQk(),t.ynx(106,33),t.YNc(107,Ft,2,0,"th",22),t.YNc(108,Pt,2,1,"td",23),t.BQk(),t.YNc(109,Rt,1,0,"tr",34),t.YNc(110,zt,1,0,"tr",35),t.qZA(),t._UZ(111,"mat-paginator",36),t.qZA(),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.hij("Hor\xe1rio da ultima atualiza\xe7\xe3o : ",n.ultimaAtualizacao,""),t.xp6(3),t.Q6J("formGroup",n.formDash),t.xp6(7),t.Q6J("ngForOf",n.etds),t.xp6(6),t.Q6J("ngForOf",n.processo),t.xp6(6),t.Q6J("ngForOf",n.semaforo),t.xp6(6),t.Q6J("ngForOf",n.tipo),t.xp6(6),t.Q6J("ngForOf",n.armazenado_by),t.xp6(20),t.AsE("CAs : ",n.qtd_verde," ",n.vol_verde,""),t.xp6(6),t.AsE("CAs : ",n.qtd_amarelo," ",n.vol_amarelo,""),t.xp6(6),t.AsE("CAs : ",n.qtd_vermelho," ",n.vol_vermelho,""),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(35),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(17,St)))},directives:[i._Y,i.JL,i.sg,g.KE,g.hX,z.gD,i.JJ,i.u,p.sg,S.ey,T.Nt,i.Fj,Z.lW,c.a8,c.dn,m.BZ,O.YE,J.jt,m.w1,m.fO,m.ge,O.nU,m.Dz,m.ev,p.mk,m.as,m.XQ,m.nj,m.Gk,N.NW],styles:[".teste[_ngcontent-%COMP%]{width:100%}.badge-24[_ngcontent-%COMP%]{background-color:#adff2f;text-align:center;border-radius:5px;margin-right:10px;margin-left:10px;font-weight:700;box-shadow:0 0 10px -3px #000000c7;font-size:1vw}.mat-table[_ngcontent-%COMP%]{background-color:transparent!important}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;border-top-left-radius:1em;border-top-right-radius:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-weight:700;font-size:medium}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{background-color:#f0f0f0;border-top-right-radius:1em}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:first-child{background-color:#f0f0f0;border-top-left-radius:1em}mat-paginator[_ngcontent-%COMP%]{border-bottom-left-radius:1em;border-bottom-right-radius:1em}.badge-24-48[_ngcontent-%COMP%]{background-color:#ff0;text-align:center;border-radius:5px;margin-right:10px;margin-left:10px;font-weight:700;box-shadow:0 0 10px -3px #000000c7;font-size:1vw}.badge-48[_ngcontent-%COMP%]{background-color:red;text-align:center;border-radius:5px;margin-right:10px;margin-left:10px;color:#fff;font-weight:700;box-shadow:0 0 10px -3px #000000c7;font-size:1vw}.body[_ngcontent-%COMP%]{margin:1em}td[_ngcontent-%COMP%]{font-size:.8vw}th[_ngcontent-%COMP%]{font-size:1vw!important}mat-card[_ngcontent-%COMP%]{text-align:center;border-radius:1em;border-right-style:solid;border-right-width:5px;box-shadow:0 0 10px -3px #000000c7}.card-24[_ngcontent-%COMP%]{border-right-color:#adff2f}.card-24-48[_ngcontent-%COMP%]{border-right-color:#ff0}.card-48[_ngcontent-%COMP%]{border-right-color:red}"]}),o})();class v{constructor(){this.token=_.m.GetInstance().GetToken().token}}function Dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie um TOTE ou endere\xe7o"),t.qZA(),t.TgZ(3,"mat-card-content"),t._uU(4," Quantidade de CAs nesse pallet : "),t.TgZ(5,"div",2),t._uU(6),t.qZA(),t.TgZ(7,"mat-form-field"),t.TgZ(8,"mat-label"),t._uU(9,"TOTE/Endere\xe7o"),t.qZA(),t._UZ(10,"input",3),t.qZA(),t.qZA(),t.TgZ(11,"mat-card-actions",4),t.TgZ(12,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().Proximo()}),t._uU(13,"Proximo"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(6),t.hij(" ",e.quantidade_ca," ")}}let It=(()=>{class o{constructor(e,n,r){this._formBuilder=e,this.transferModel=n,this.armazenarService=r,this.mostrar=!0,this.quantidade_ca=0,this.customPatterns={0:{pattern:new RegExp("[0-9]")},P:{pattern:new RegExp("[a-zA-Z]")}}}ngOnInit(){this.CreateForm(this.transferModel),this.onChanges()}onKeydownHandler(e){e.preventDefault()}CreateForm(e){this.formCliente=this._formBuilder.group({ca_bx:[e.ca_bx,i.kI.required]})}onChanges(){this.formCliente.get("ca_bx").valueChanges.subscribe(e=>{this.transferModel.ca_bx=e})}Proximo(){console.log(this.transferModel),this.armazenarService.PesquisarPorEndereco(JSON.stringify(this.transferModel)).subscribe(e=>{0!=e.length?(this.quantidade_ca=e.length,u().fire({text:"Deseja remover "+this.quantidade_ca+" totes da posi\xe7\xe3o?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, continuar!"}).then(n=>{let r={data:e,token:_.m.GetInstance().GetToken().token};n.isConfirmed&&this.armazenarService.RemoverTOTES(JSON.stringify(r)).subscribe(s=>{u().fire({icon:"success",text:"OK!",timer:1e3}),this.ResetForm()})})):u().fire({icon:"warning",text:"Nada encontrado!",timer:1e3})},e=>{u().fire({icon:"error",text:"CA ou BX n\xe3o encontrada."})})}Anterior(){this.mostrar=!0}ResetForm(){this.transferModel=new v,this.CreateForm(this.transferModel),this.mostrar=!0,this.quantidade_ca=0,this.onChanges()}Finalizar(){this.formCliente.valid&&(console.log(JSON.stringify(this.transferModel)),this.armazenarService.TransferToteOutbound(JSON.stringify(this.transferModel)).subscribe(e=>{u().fire({icon:"success",text:"Salvo!"})},e=>{u().fire({icon:"error",text:"Ocorreu um erro!"})}),this.ResetForm())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(v),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-remove-endereco"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown.enter",function(s){return n.onKeydownHandler(s)},!1,t.evT)},features:[t._Bn([v])],decls:2,vars:2,consts:[[3,"formGroup"],[4,"ngIf"],[1,"coin"],["matInput","","placeholder","Escaneie uma posi\xe7\xe3o","formControlName","ca_bx"],["align","end"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.YNc(1,Dt,14,1,"mat-card",1),t.qZA()),2&e&&(t.Q6J("formGroup",n.formCliente),t.xp6(1),t.Q6J("ngIf",n.mostrar))},directives:[i._Y,i.JL,i.sg,p.O5,c.a8,c.n5,c.dn,g.KE,g.hX,T.Nt,i.Fj,i.JJ,i.u,c.hq,Z.lW],styles:["mat-card[_ngcontent-%COMP%]{margin:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})();var D=l(2368);const Bt=["aTote"],Yt=["aPosicao"];function Ht(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie a posi\xe7\xe3o"),t.qZA(),t.TgZ(3,"mat-card-subtitle"),t.TgZ(4,"div",6),t._uU(5),t.qZA(),t.qZA(),t.TgZ(6,"mat-card-content"),t.TgZ(7,"mat-form-field"),t.TgZ(8,"mat-label"),t._uU(9,"Posi\xe7\xe3o"),t.qZA(),t._UZ(10,"input",7,8),t.qZA(),t.qZA(),t.TgZ(12,"mat-card-actions",9),t.TgZ(13,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().Anterior()}),t._uU(14,"Anterior"),t.qZA(),t.TgZ(15,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().Finalizar()}),t._uU(16,"Finalizar"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(5),t.hij(" Totes : ",e.stageModel.tote.length," "),t.xp6(10),t.Q6J("disabled",e.desabilitarFinalizar||null==e.stageModel.stage||""==e.stageModel.stage)}}function Qt(o,a){1&o&&(t.TgZ(0,"div",18),t._uU(1," Tote Invalido. "),t.qZA())}function Gt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"div",12),t.TgZ(2,"div",13),t.TgZ(3,"mat-slide-toggle",14),t._uU(4,"Aviso ETD?"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(5,"mat-card-title"),t._uU(6,"Escaneie o TOTE"),t.qZA(),t.TgZ(7,"mat-card-subtitle"),t.TgZ(8,"div",6),t._uU(9),t.qZA(),t.qZA(),t.TgZ(10,"mat-card-content"),t.TgZ(11,"mat-form-field"),t.TgZ(12,"mat-label"),t._uU(13,"TOTE"),t.qZA(),t._UZ(14,"input",15,16),t.YNc(16,Qt,2,0,"div",17),t.qZA(),t.qZA(),t.TgZ(17,"mat-card-actions",9),t.TgZ(18,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().Proximo()}),t._uU(19,"Proximo"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(9),t.hij(" Totes : ",e.stageModel.tote.length," "),t.xp6(7),t.Q6J("ngIf",null==e.tote.errors?null:e.tote.errors.pattern),t.xp6(2),t.Q6J("disabled",!(e.stageModel.tote.length>0))}}function jt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-list-item"),t.TgZ(1,"div",4),t._uU(2),t.qZA(),t.TgZ(3,"div",4),t.TgZ(4,"button",23),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw(2).RemoveTote(s)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=a.$implicit;t.xp6(2),t.hij(" ",e," ")}}function $t(o,a){if(1&o&&(t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"CAs Adicionadas"),t.qZA(),t.TgZ(3,"div",19),t.TgZ(4,"mat-selection-list",20,21),t.YNc(6,jt,7,1,"mat-list-item",22),t.qZA(),t.qZA(),t.qZA()),2&o){const e=t.oxw();t.xp6(6),t.Q6J("ngForOf",e.tote_etd_apoio)}}function Kt(o,a){1&o&&(t.TgZ(0,"div",24),t._UZ(1,"span",25),t.qZA())}function Vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie uma CA/BX"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"mat-form-field"),t.TgZ(5,"mat-label"),t._uU(6,"Posi\xe7\xe3o"),t.qZA(),t._UZ(7,"input",2),t.qZA(),t.qZA(),t.TgZ(8,"mat-card-actions",3),t.TgZ(9,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().Proximo()}),t._uU(10,"Proximo"),t.qZA(),t.qZA(),t.qZA()}}function Lt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card"),t.TgZ(1,"mat-card-title"),t._uU(2,"Escaneie a nova posi\xe7\xe3o"),t.qZA(),t.TgZ(3,"mat-card-content"),t._uU(4,"Quantidade de CAs nesse pallet : "),t.TgZ(5,"div",5),t._uU(6),t.qZA(),t.qZA(),t.TgZ(7,"mat-card-content"),t.TgZ(8,"mat-form-field"),t.TgZ(9,"mat-label"),t._uU(10,"Posi\xe7\xe3o"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.qZA(),t.TgZ(12,"mat-card-actions",3),t.TgZ(13,"button",4),t.NdJ("click",function(){return t.CHM(e),t.oxw().Anterior()}),t._uU(14,"Anterior"),t.qZA(),t.TgZ(15,"button",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().Finalizar()}),t._uU(16,"Finalizar"),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(6),t.hij(" ",e.quantidade_ca," "),t.xp6(9),t.Q6J("disabled",""==e.transferModel.pallet)}}const Wt=[{path:"armazenar-outbound",component:(()=>{class o{constructor(e,n,r){this._formBuilder=e,this.stageModel=n,this.armazenarService=r,this.mostrar=!0,this.consultETD=[],this.desabilitarFinalizar=!1,this.totePattern="([a-zA-Z]{2,2}-?d{1}-?d{3}-?d{3}-?d{2}-?d{2})",this.tote_etd_apoio=[]}ngAfterViewInit(){this.inputTote.nativeElement.focus()}onKeydownHandler(e){e.preventDefault()}ConsultarTodosTotesPendentes(){this.armazenarService.ConsultarTotesPendentesOutbound(JSON.stringify(this.stageModel)).subscribe(e=>{this.consultETD=e})}ngOnInit(){this.CreateForm(this.stageModel),this.onChanges(),this.ConsultarTodosTotesPendentes()}CreateForm(e){this.formCliente=this._formBuilder.group({posicao:[e.stage,i.kI.required],tote:[],aviso_etd:[]})}get tote(){return this.formCliente.get("tote")}onChanges(){this.formCliente.get("tote").valueChanges.subscribe(e=>{var n;if("C"==e[0].toUpperCase()&&18==e.length||"M"==e[0].toUpperCase()&&16==e.length){if(null===(n=this.formCliente.get("tote").errors)||void 0===n?void 0:n.pattern)return;if(-1===this.Exists(e))return this.ConsultarPorPickupID(e),void this.formCliente.get("tote").setValue("",{emitEvent:!1});this.formCliente.get("tote").setValue("",{emitEvent:!1})}}),this.formCliente.get("posicao").valueChanges.subscribe(e=>{this.stageModel.stage=e})}ConsultarPorPickupID(e){let n={ca:e,token:_.m.GetInstance().GetToken().token};this.armazenarService.ConsultarPickupId(JSON.stringify(n)).subscribe(r=>{if(6==r.length)return this.AdicionarTotes(r),void this.Proximo();u().fire({text:"Deseja Atrelar os "+r.length+" totes encontrados?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sim, continuar!"}).then(s=>{if(s.isConfirmed)this.AdicionarTotes(r);else{this.stageModel.tote.push(e),this.formCliente.get("tote").setValue("",{emitEvent:!1});let f=this.ReturnETD(e);this.ShowETD(f),this.tote_etd_apoio.push(e+" | ETD : "+(null==f?void 0:f.hour))}})},r=>{this.stageModel.tote.push(e),this.formCliente.get("tote").setValue("",{emitEvent:!1});let s=this.ReturnETD(e);this.ShowETD(s),this.tote_etd_apoio.push(e+" | ETD : "+(null==s?void 0:s.hour))})}AdicionarTotes(e){e.forEach(n=>{this.stageModel.tote.push(n.tote),this.tote_etd_apoio.push(n.tote+" | ETD : "+(null==n?void 0:n.etd_hour))})}ShowETD(e){if(this.formCliente.get("aviso_etd").value){if(null==e)return void u().fire({text:"ETD do TOTE n\xe3o encontrado!",icon:"warning",allowEnterKey:!1,timer:3e3});u().fire({html:"<p class='w-100 etd'>Processo : "+e.status+"</p><p class='w-100 etd'>ETD : "+e.date+"</p> <p class='hour'>"+e.hour+"</p>",icon:"info",allowEnterKey:!1,timer:3e3,background:"#FFF159"})}}Proximo(){this.mostrar=!1}Anterior(){this.mostrar=!0}ResetForm(){this.stageModel=new C,this.CreateForm(this.stageModel),this.mostrar=!0,this.ConsultarTodosTotesPendentes(),this.onChanges(),this.tote_etd_apoio=[]}Finalizar(){this.formCliente.valid&&(this.desabilitarFinalizar=!0,this.armazenarService.ArmazenarToteOutbound(JSON.stringify(this.stageModel)).subscribe(e=>{u().fire({icon:"success",text:"Salvo!",timer:1e3}),this.ResetForm()},e=>{u().fire({icon:"error",text:"Ocorreu um erro!",timer:1e3})}),this.desabilitarFinalizar=!1)}RemoveTote(e){const n=this.Exists(e.split(" ")[0]);-1!==n&&(this.stageModel.tote.splice(n,1),this.tote_etd_apoio.splice(n,1))}Exists(e){return this.stageModel.tote.indexOf(e)}ReturnETD(e){return this.consultETD.find(r=>r.tote==e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(C),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tracking"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Bt,5),t.Gf(Yt,5)),2&e){let r;t.iGM(r=t.CRH())&&(n.inputTote=r.first),t.iGM(r=t.CRH())&&(n.inputPosicao=r.first)}},hostBindings:function(e,n){1&e&&t.NdJ("keydown.enter",function(s){return n.onKeydownHandler(s)},!1,t.evT)},features:[t._Bn([C,w])],decls:8,vars:5,consts:[[3,"formGroup"],["aForm",""],[4,"ngIf"],[1,"row"],[1,"col","text-center"],["class","spinner-border","role","status",4,"ngIf"],[1,"coin"],["name","posicao","matInput","","placeholder","Escaneie uma posi\xe7\xe3o","formControlName","posicao"],["aPosicao",""],["align","end"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"row","mb-3"],[1,"col"],["formControlName","aviso_etd"],["matInput","","name","tote","NgModel","","pattern","[a-zA-Z]{2,2}\\-?\\[a-zA-Z]{3,2}\\-?\\d{2}\\-?\\d{3}","placeholder","Escaneie uma CA","formControlName","tote"],["aTote",""],["style","color: red;",4,"ngIf"],[2,"color","red"],[1,"row","w-100"],[1,"w-100"],["modeTote",""],[4,"ngFor","ngForOf"],["mat-icon-button","",1,"btn","btn-danger",3,"click"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0,1),t.YNc(2,Ht,17,2,"mat-card",2),t.YNc(3,Gt,20,3,"mat-card",2),t.YNc(4,$t,7,1,"mat-card",2),t.qZA(),t.TgZ(5,"div",3),t.TgZ(6,"div",4),t.YNc(7,Kt,2,0,"div",5),t.qZA(),t.qZA()),2&e&&(t.Q6J("formGroup",n.formCliente),t.xp6(2),t.Q6J("ngIf",!n.mostrar),t.xp6(1),t.Q6J("ngIf",n.mostrar),t.xp6(1),t.Q6J("ngIf",n.stageModel.tote.length>0&&n.mostrar),t.xp6(3),t.Q6J("ngIf",n.desabilitarFinalizar))},directives:[i._Y,i.JL,i.sg,p.O5,c.a8,c.n5,c.$j,c.dn,g.KE,g.hX,T.Nt,i.Fj,i.JJ,i.u,c.hq,Z.lW,D.Rr,i.c5,b.Ub,p.sg,b.Tg,x.Hw],styles:["mat-card[_ngcontent-%COMP%]{margin:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})()},{path:"consulta-etd",component:H},{path:"remover-endereco",component:It},{path:"heatmap-outbound",component:st},{path:"transferencia-outbound",component:(()=>{class o{constructor(e,n,r){this._formBuilder=e,this.transferModel=n,this.armazenarService=r,this.mostrar=!0,this.quantidade_ca=0,this.customPatterns={0:{pattern:new RegExp("[0-9]")},P:{pattern:new RegExp("[a-zA-Z]")}}}ngOnInit(){this.CreateForm(this.transferModel),this.onChanges()}onKeydownHandler(e){e.preventDefault()}CreateForm(e){this.formCliente=this._formBuilder.group({new_stage:[e.new_stage,i.kI.required],ca_bx:[e.ca_bx,i.kI.required]})}onChanges(){this.formCliente.get("new_stage").valueChanges.subscribe(e=>{this.transferModel.new_stage=e}),this.formCliente.get("ca_bx").valueChanges.subscribe(e=>{this.transferModel.ca_bx=e})}Proximo(){this.armazenarService.PesquisarPalletOutbound(JSON.stringify(this.transferModel)).subscribe(e=>{this.transferModel.pallet=e.pallet,this.quantidade_ca=e.quantidade_ca,this.mostrar=!1},e=>{u().fire({icon:"error",text:"CA ou BX n\xe3o encontrada."})})}Anterior(){this.mostrar=!0}ResetForm(){this.transferModel=new v,this.CreateForm(this.transferModel),this.mostrar=!0,this.onChanges()}Finalizar(){this.formCliente.valid&&(console.log(JSON.stringify(this.transferModel)),this.armazenarService.TransferToteOutbound(JSON.stringify(this.transferModel)).subscribe(e=>{u().fire({icon:"success",text:"Salvo!"})},e=>{u().fire({icon:"error",text:"Ocorreu um erro!"})}),this.ResetForm())}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(i.qu),t.Y36(v),t.Y36(A))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-transferencia"]],hostBindings:function(e,n){1&e&&t.NdJ("keydown.enter",function(s){return n.onKeydownHandler(s)},!1,t.evT)},features:[t._Bn([v])],decls:3,vars:3,consts:[[3,"formGroup"],[4,"ngIf"],["matInput","","placeholder","Escaneie uma posi\xe7\xe3o","formControlName","ca_bx"],["align","end"],["mat-raised-button","","color","primary",3,"click"],[1,"coin"],["matInput","","placeholder","Escaneie uma posi\xe7\xe3o","formControlName","new_stage"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t.YNc(1,Vt,11,0,"mat-card",1),t.YNc(2,Lt,17,2,"mat-card",1),t.qZA()),2&e&&(t.Q6J("formGroup",n.formCliente),t.xp6(1),t.Q6J("ngIf",n.mostrar),t.xp6(1),t.Q6J("ngIf",!n.mostrar))},directives:[i._Y,i.JL,i.sg,p.O5,c.a8,c.n5,c.dn,g.KE,g.hX,T.Nt,i.Fj,i.JJ,i.u,c.hq,Z.lW],styles:["mat-card[_ngcontent-%COMP%]{margin:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),o})()},{path:"armazenar-bancada",component:X},{path:"relatorio-eagle-outbound",component:Jt},{path:"update-map-outbound",component:W}];let te=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[k.Bz.forChild(Wt)],k.Bz]}),o})();var ee=l(2638),oe=l(4594),ne=l(1125),ae=l(7544),re=l(6856),ie=l(3954),se=l(495);let le=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[p.ez,te,x.Ps,b.ie,i.UX,i.u5,ee.SJ,oe.g0,ne.To,c.QW,T.c,Z.ot,q.JF,m.p0,ae.g,re.FA,S.XK,z.LD,N.TU,O.JX,ie.N6,J.JB,se.Cl,D.rP,R.AV,F.Is,E.Tx]]}),o})()}}]);